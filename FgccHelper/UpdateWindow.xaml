<Window x:Class="FgccHelper.UpdateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="软件更新" 
        Height="450" 
        Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow"
        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
        Icon="icon.ico"
        Topmost="True">

  <Window.Resources>
    <Style TargetType="Button">
      <Setter Property="Padding" Value="15,5"/>
      <Setter Property="Margin" Value="5"/>
      <Setter Property="MinWidth" Value="80"/>
      <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="2">
              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}"/>
              </Trigger>
              <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"/>
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="TextBlock" x:Key="HeaderTextStyle">
      <Setter Property="FontSize" Value="16"/>
      <Setter Property="FontWeight" Value="Bold"/>
      <Setter Property="Margin" Value="0,0,0,10"/>
    </Style>

    <Style TargetType="TextBlock" x:Key="InfoTextStyle">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="Margin" Value="0,0,0,5"/>
    </Style>
  </Window.Resources>

  <Grid Margin="20">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- 标题 -->
    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
      <Image Source="icon.ico" Width="32" Height="32" Margin="0,0,10,0" VerticalAlignment="Center"/>
      <TextBlock Text="发现新版本" Style="{StaticResource HeaderTextStyle}" VerticalAlignment="Center"/>
    </StackPanel>

    <!-- 版本信息 -->
    <StackPanel Grid.Row="1" Margin="0,0,0,15">
      <TextBlock x:Name="CurrentVersionText" Style="{StaticResource InfoTextStyle}"/>
      <TextBlock x:Name="NewVersionText" Style="{StaticResource InfoTextStyle}"/>
      <TextBlock x:Name="FileSizeText" Style="{StaticResource InfoTextStyle}"/>
      <TextBlock x:Name="ReleaseDateText" Style="{StaticResource InfoTextStyle}"/>
    </StackPanel>

    <!-- 更新说明 -->
    <GroupBox Grid.Row="2" Header="更新内容" Margin="0,0,0,15">
      <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="200">
        <TextBlock x:Name="ReleaseNotesText" 
                          TextWrapping="Wrap" 
                          Style="{StaticResource InfoTextStyle}"
                          LineHeight="18"/>
      </ScrollViewer>
    </GroupBox>

    <!-- 提示信息 -->
    <TextBlock Grid.Row="3" 
                  Text="建议您在更新前保存当前工作。更新过程中应用程序将自动重启。"
                  TextWrapping="Wrap"
                  Style="{StaticResource InfoTextStyle}"
                  Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                  Margin="0,0,0,20"/>

    <!-- 按钮 -->
    <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
      <Button x:Name="UpdateButton" 
                   Content="立即更新" 
                   Click="UpdateButton_Click"
                   Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                   Foreground="White"
                   FontWeight="Bold" Height="38"/>
      <Button x:Name="CancelButton" 
                   Content="稍后提醒" 
                   Click="CancelButton_Click" Height="38"/>
      <Button x:Name="SkipButton" 
                   Content="跳过此版本" 
                   Click="SkipButton_Click"
                   Visibility="Collapsed"/>
    </StackPanel>
  </Grid>
</Window>